<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="assets/logo.png">
    <link rel="apple-touch-icon" href="assets/logo.png">
    <title>GESTIONALE A3 | Medlav.app</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        :root {
            /* Palette Tecnica - Light */
            --color-white: #ffffff;
            --color-light-gray: #f5f5f5;
            --color-medium-gray: #888888;
            --color-dark-gray: #333333;
            --color-black: #000000;
            --color-accent-red: #dc2626;

            --color-background: var(--color-white);
            --color-surface: var(--color-light-gray);
            --color-text-primary: var(--color-black);
            --color-text-secondary: var(--color-dark-gray);
            --color-text-muted: var(--color-medium-gray);
            --color-border: var(--color-dark-gray);
            --color-accent: var(--color-accent-red);

            /* Tipografia System-Based per massima velocità */
            --font-heading: 'Impact', 'Arial Black', sans-serif;
            --font-body: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            --font-mono: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;

            --nav-height: 80px;
        }

        [data-theme="dark"] {
            --color-background: #0a0a0a;
            --color-surface: #1a1a1a;
            --color-text-primary: #f5f5f5;
            --color-text-secondary: #b8b8b8;
            --color-text-muted: #888888;
            --color-border: #333333;
            --color-accent: #ff3333;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: var(--color-background);
            color: var(--color-text-primary);
            font-family: var(--font-body);
            line-height: 1.6;
            overflow-x: hidden;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* --- NAVBAR --- */
        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            height: var(--nav-height);
            background: var(--color-background);
            border-bottom: 4px solid var(--color-accent);
            z-index: 1000;
            display: flex;
            align-items: center;
        }

        .nav-content {
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .github-icon {
            display: flex;
            align-items: center;
            padding: 0;
            line-height: 0;
        }


        .brand {
            font-family: var(--font-heading);
            font-size: 1.5rem;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--color-accent);
        }

        .nav-links {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .nav-links a,
        .theme-toggle {
            color: var(--color-text-secondary);
            text-decoration: none;
            font-family: var(--font-mono);
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            transition: 0.2s;
            cursor: pointer;
            background: none;
            border: none;
        }

        .nav-links a:hover,
        .theme-toggle:hover {
            color: var(--color-accent);
        }

        /* --- HERO SECTION --- */
        .hero {
            padding: 160px 20px 80px;
            text-align: center;
            border-bottom: 1px solid var(--color-border);
        }

        .sub-header {
            font-family: var(--font-mono);
            font-size: 0.8rem;
            color: var(--color-accent);
            letter-spacing: 3px;
            margin-bottom: 1rem;
            text-transform: uppercase;
        }

        h1 {
            font-family: var(--font-heading);
            font-size: clamp(3rem, 10vw, 6.5rem);
            color: var(--color-text-primary);
            text-transform: uppercase;
            line-height: 0.85;
            margin-bottom: 1.5rem;
        }

        .normativa-tags {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 2.5rem;
        }

        .tag {
            border: 1px solid var(--color-border);
            padding: 4px 12px;
            font-family: var(--font-mono);
            font-size: 0.7rem;
            font-weight: bold;
            text-transform: uppercase;
            color: var(--color-text-muted);
        }

        .hero-p {
            max-width: 750px;
            margin: 0 auto 3rem;
            font-size: 1.2rem;
            color: var(--color-text-secondary);
            font-weight: 500;
        }

        /* --- BUTTONS (Brutalism Style) --- */
        .btn-group {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 18px 36px;
            font-family: var(--font-heading);
            text-transform: uppercase;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 3px solid var(--color-text-primary);
            font-size: 1rem;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: var(--color-text-primary);
            color: var(--color-background);
        }

        .btn-secondary {
            background: transparent;
            color: var(--color-text-primary);
        }

        .btn:hover {
            transform: translate(-5px, -5px);
            box-shadow: 8px 8px 0 var(--color-accent);
        }

        /* --- MARQUEE / MOCKUP --- */
        .marquee-container {
            background: var(--color-surface);
            padding: 60px 0;
            border-bottom: 1px solid var(--color-border);
            overflow: hidden;
            mask-image: linear-gradient(to right, transparent, black 2%, black 98%, transparent);
            -webkit-mask-image: linear-gradient(to right, transparent, black 2%, black 98%, transparent);
        }

        .marquee-content {
            display: flex;
            width: max-content;
            gap: 30px;
            animation: scroll 90s linear infinite;
        }

        .mock-window {
            width: 450px;
            height: 300px;
            background: var(--color-background);
            border: 2px solid var(--color-border);
            display: flex;
            flex-direction: column;
        }

        .mock-header {
            height: 25px;
            border-bottom: 1px solid var(--color-border);
            background: var(--color-surface);
            display: flex;
            align-items: center;
            padding: 0 10px;
            gap: 5px;
        }

        .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--color-border);
        }

        .mock-body {
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: var(--font-mono);
            font-size: 0.7rem;
            color: var(--color-text-muted);
        }

        @keyframes scroll {
            0% {
                transform: translateX(0);
            }

            100% {
                transform: translateX(-50%);
            }
        }

        /* --- CONTENT SECTIONS --- */
        .guide-container {
            max-width: 1100px;
            margin: 100px auto;
            padding: 0 2rem;
        }

        .caution-box {
            border-left: 8px solid var(--color-accent);
            padding: 30px;
            margin-bottom: 80px;
            background: var(--color-surface);
        }

        .guide-step {
            display: grid;
            grid-template-columns: 120px 1fr;
            gap: 40px;
            margin-bottom: 120px;
        }

        .step-number {
            font-family: var(--font-heading);
            font-size: 5rem;
            color: var(--color-accent);
            line-height: 0.8;
            opacity: 0.9;
        }

        .reveal {
            opacity: 0;
            transform: translateY(40px);
            transition: 0.8s cubic-bezier(0.22, 1, 0.36, 1);
        }

        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        .footer {
            background: var(--color-black);
            color: var(--color-white);
            padding: 80px 20px;
            text-align: center;
            border-top: 10px solid var(--color-accent);
        }


        pre {
            font-family: var(--font-mono);
            background: var(--color-surface);
            color: var(--color-text-secondary);
            padding: 30px;
            border: 1px solid var(--color-border);
            border-left: 5px solid var(--color-accent);
            margin-top: 25px;
            overflow-x: auto;
            font-size: 0.85rem;
            line-height: 1.5;
            position: relative;
            box-shadow: 10px 10px 0px rgba(0, 0, 0, 0.1);
        }

        pre::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%),
                linear-gradient(90deg, rgba(255, 0, 0, 0.03), rgba(0, 255, 0, 0.01), rgba(0, 0, 255, 0.03));
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
        }

        /* Evidenziazione sintassi personalizzata per il tema Red/Black/White */
        pre code {
            color: #ffffff;
        }

        /* Commenti in Rosso Accento */
        pre .comment {
            color: var(--color-accent);
            opacity: 0.8;
            font-style: italic;
        }

        /* Stringhe o Keyword in Grigio Chiaro per contrasto */
        pre .keyword {
            color: var(--color-light-gray);
            font-weight: bold;
            text-transform: uppercase;
        }


        .app-shot {
            width: auto;
            height: 400px;

            border: 2px solid var(--color-border);
            background: var(--color-background);
            object-fit: contain;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }


        .app-shot:hover {
            transform: scale(1.02);
            box-shadow: 10px 10px 0px var(--color-accent);
            z-index: 10;
        }

        @media (max-width: 768px) {
            .guide-step {
                grid-template-columns: 1fr;
            }

            .step-number {
                font-size: 3rem;
            }

            .nav-links a:not(.github-icon) {
                display: none;
            }

            .guide-container {
                padding: 0 1.5rem;
            }

            pre {
                max-width: calc(100vw - 3rem);
                padding: 15px;
                font-size: 0.75rem;
            }


            .app-shot,
            .mock-window {
                height: 250px;
            }

            .mock-window {
                width: 320px;
            }

            .marquee-container {
                padding: 20px 0;
            }
        }

        @media (max-width: 500px) {
            .nav-content {
                padding: 0 1rem;
            }

            .nav-links {
                gap: 0.75rem;
            }

            .brand {
                font-family: var(--font-heading);
                font-size: 1 rem;
                letter-spacing: 0.1em;
                text-transform: uppercase;
                color: var(--color-accent);
            }

            /* Mobile Theme Toggle Text Fix */
            .theme-toggle {
                font-size: 0 !important;
                padding: 4px 4px;
                align-items: center;
            }

            body:not([data-theme="dark"]) .theme-toggle::after {
                content: "[ D ]";
                font-size: 0.85rem;
            }

            body[data-theme="dark"] .theme-toggle::after {
                content: "[ L ]";
                font-size: 0.85rem;
            }


            .app-shot,
            .mock-window {
                height: 200px;
            }

            .mock-window {
                width: 280px;
            }

            .marquee-container {
                padding: 10px 0;
            }
        }

        .reveal {
            opacity: 0;
            transform: translateY(40px);
            transition: 0.8s cubic-bezier(0.22, 1, 0.36, 1);
        }

        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>

<body data-theme="dark">

    <nav class="navbar">
        <div class="nav-content">
            <a class="brand" href="https://medlav.app" style="text-decoration: none;">MEDLAV.APP</a>
            <div class="nav-links">
                <a href="#architettura">DOCS</a>
                <a href="https://github.com/medlav/gestionale_a3" target="_blank" class="github-icon">
                    <svg height="20" viewBox="0 0 16 16" width="20" fill="currentColor">
                        <path
                            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
                        </path>
                    </svg>
                </a>
                <button class="theme-toggle" onclick="toggleTheme()" id="themeBtn">
                    [ LIGHT_MODE ]
                </button>
            </div>
        </div>
    </nav>

    <header class="hero">
        <div class="sub-header">BUILD_IN_PUBLIC // EXPERIMENTAL</div>
        <h1>GESTIONALE <span style="color:var(--color-accent)">A3</span></h1>

        <div class="normativa-tags">
            <span class="tag">ALLEGATO 3A</span>
            <span class="tag">ALLEGATO 3B</span>
            <span class="tag">D.LGS 81/08</span>
            <span class="tag">TESTO UNICO</span>
        </div>

        <p class="hero-p">
            Un tentativo di gestionale "local-first" per la Medicina del Lavoro.
            Formattazione dati compatibile per l'invio degli Allegati 3B all' INAIL con
            standardizzazione della cartella sanitaria digitale (Allegato 3A).
        </p>

        <div class="btn-group">
            <a href="https://github.com/medlav/gestionale_a3" class="btn btn-primary">
                SOURCE_CODE (GPL)
            </a>
            <a href="#architettura" class="btn btn-secondary">
                DOCUMENTAZIONE
            </a>
        </div>
    </header>


    <section class="marquee-container">
        <div class="marquee-content" id="marquee">
            <img src="assets/screenshots/homepage.png" class="app-shot">
            <img src="assets/screenshots/aziende_list.png" class="app-shot">
            <img src="assets/screenshots/azienda_form_full.png" class="app-shot">
            <img src="assets/screenshots/lavoratori_list.png" class="app-shot">
            <img src="assets/screenshots/lavoratore_form_filled.png" class="app-shot">
            <img src="assets/screenshots/visite_form_giudizio_filled.png" class="app-shot">
            <img src="assets/screenshots/view_3b_filled.png" class="app-shot">

            <img src="assets/screenshots/homepage.png" class="app-shot">
            <img src="assets/screenshots/aziende_list.png" class="app-shot">
            <img src="assets/screenshots/azienda_form_full.png" class="app-shot">
            <img src="assets/screenshots/lavoratori_list.png" class="app-shot">
            <img src="assets/screenshots/lavoratore_form_filled.png" class="app-shot">
            <img src="assets/screenshots/visite_form_giudizio_filled.png" class="app-shot">
            <img src="assets/screenshots/view_3b_filled.png" class="app-shot">
        </div>
    </section>

    <section class="marquee-container">
        <div class="marquee-content">
            <div class="mock-window">
                <div class="mock-header">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
                <div class="mock-body">aziende_list_view.dart</div>
            </div>
            <div class="mock-window">
                <div class="mock-header">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
                <div class="mock-body">convertitore_xml_3b.dart</div>
            </div>
            <div class="mock-window">
                <div class="mock-header">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
                <div class="mock-body">visita_form.dart</div>
            </div>
            <div class="mock-window">
                <div class="mock-header">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
                <div class="mock-body">calcolatore_3b.dart</div>
            </div>
            <div class="mock-window">
                <div class="mock-header">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
                <div class="mock-body">aziende_list_view.dart</div>
            </div>
            <div class="mock-window">
                <div class="mock-header">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
                <div class="mock-body">convertitore_xml_3b.dart</div>
            </div>
            <div class="mock-window">
                <div class="mock-header">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
                <div class="mock-body">aziende_list_view.dart</div>
            </div>
            <div class="mock-window">
                <div class="mock-header">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
                <div class="mock-body">convertitore_xml_3b.dart</div>
            </div>
            <div class="mock-window">
                <div class="mock-header">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
                <div class="mock-body">visita_form.dart</div>
            </div>
            <div class="mock-window">
                <div class="mock-header">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
                <div class="mock-body">calcolatore_3b.dart</div>
            </div>
            <div class="mock-window">
                <div class="mock-header">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
                <div class="mock-body">aziende_list_view.dart</div>
            </div>
            <div class="mock-window">
                <div class="mock-header">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
                <div class="mock-body">convertitore_xml_3b.dart</div>
            </div>
        </div>

    </section>

    <div class="guide-container">
        <div class="caution-box reveal">
            <h3 style="font-family:var(--font-heading); margin-bottom:10px;">!!! ATTENZIONE</h3>
            <p style="font-family:var(--font-mono); font-size:0.9rem;">
                Software in stato PRE-ALPHA. L'architettura è soggetta a modifiche radicali.
                Utilizzare esclusivamente per test e ricerca.
            </p>
        </div>
        <section id="architettura" class="guide-step reveal">
            <div class="step-number">01</div>
            <div class="guide-text">
                <h2 style="font-family:var(--font-heading); font-size: 2.5rem;">CORE & DATABASE (DRIFT)</h2>
                <p>Definizione dello schema relazionale per l'archiviazione conforme agli Allegati 3A e 3B. Gestione
                    automatizzata di Unità Produttive e Codici ATECO.</p>
                <pre>
// data/database.dart
@DataClassName('Azienda')
class Aziende extends Table {
  IntColumn get id => integer().autoIncrement()();
  TextColumn get ragioneSociale => text()();
  TextColumn get codiceAteco => text()();
  // Dati occupazionali aggregati (3B)
  IntColumn get occupati3112Maschi => integer().withDefault(const Constant(0))();
  IntColumn get occupati3112Femmine => integer().withDefault(const Constant(0))();
}
                </pre>
            </div>
        </section>

        <section class="guide-step reveal">
            <div class="step-number">02</div>
            <div class="guide-text">
                <h2 style="font-family:var(--font-heading); font-size: 2.5rem;">CONFIGURAZIONE MEDICO</h2>
                <p>Centralizzazione dei dati del Medico Competente e gestione degli asset per la firma digitale nei PDF
                    dei Giudizi di Idoneità.</p>
                <pre>
// config_medico.dart
class ConfigMedico {
  static const String nome = "NOME";
  static const String codiceFiscale = "CFMEDICO12345678";
  static const String email = "medico@competente.it";

  // Asset firma per export PDF
  static const String pathFirma = "assets/images/firma.png";
}
                </pre>
            </div>
        </section>

        <section class="guide-step reveal">
            <div class="step-number">03</div>
            <div class="guide-text">
                <h2 style="font-family:var(--font-heading); font-size: 2.5rem;">SORVEGLIANZA SANITARIA</h2>
                <p>Tracking completo dei rischi (MMC, VDT, Rumore) e dei dati clinici necessari per la generazione
                    automatica dell'Allegato 3A.</p>
                <pre>
// data/database.dart (Table: Visite)
@DataClassName('Visita')
class Visite extends Table {
  IntColumn get lavoratoreId => integer().references(Lavoratori, #id)();
  DateTimeColumn get dataVisita => dateTime()();
  // ALLEGATO 3B - Rischi per Aggregazione
  BoolColumn get rMmc => boolean().withDefault(const Constant(false))();
  BoolColumn get rRumore => boolean().withDefault(const Constant(false))();
  IntColumn get giudizioIdoneita => integer()();
}
                </pre>
            </div>
        </section>

        <section class="guide-step reveal">
            <div class="step-number">04</div>
            <div class="guide-text">
                <h2 style="font-family:var(--font-heading); font-size: 2.5rem;">INAIL XML ENGINE</h2>
                <p>Motore di conversione per la generazione del file XML Allegato 3B. Trasformazione dei dati aggregati
                    nel formato conforme alle specifiche tecniche INAIL.</p>
                <pre>
// data/convertitore_xml_3b.dart
String generaXmlInail(Map&lt;String, dynamic&gt; dati) {
  final builder = XmlBuilder();
  builder.processing('xml', 'version="1.0" encoding="UTF-8"');
  builder.element('ComunicazioneAllegato3B', nest: () {
    builder.element('AnnoRiferimento', nest: dati['anno'].toString());
    final Azienda az = dati['azienda'];
    builder.element('DatiAzienda', nest: az.ragioneSociale);
  });
  return builder.buildDocument().toString();
}
                </pre>
            </div>
        </section>
    </div>

    <footer class="footer">
        <p style="letter-spacing: 2px;">© 2026 MEDLAV.APP | MEDICINA DEL LAVORO DIGITALE</p>
        <div style="margin-top:20px; font-family:var(--font-mono); font-size:0.7rem; opacity:0.6;">
            Sviluppato con Flutter | Local-First Architecture | Licenza GPL-v2
        </div>
    </footer>

    <script>
        // Gestione Cambio Tema
        function toggleTheme() {
            const body = document.body;
            const btn = document.getElementById('themeBtn');
            if (body.hasAttribute('data-theme')) {
                body.removeAttribute('data-theme');
                btn.innerText = '[ DARK_MODE ]';
            } else {
                body.setAttribute('data-theme', 'dark');
                btn.innerText = '[ LIGHT_MODE ]';
            }
        }

        // Observer per animazioni Reveal al passaggio
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

        // Smooth Scroll per i link interni
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
</body>

</html>